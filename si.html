<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="card.css">
    <title>Te amooooooo</title>
</head>

<body>
    <audio id="bgMusic" src="TheFateofOphelia.mp3" loop></audio>
    <div class="valentines-day-card">
        <input id="open" type="checkbox">
        <label class="open" for="open"></label>
        <div class="card-front">
            <div class="note">Presiona la carta</div>
        </div>

        <div class="card-inside">
            <div class="text-one">wiiii</div>
            <div class="image-carta">
                <div class="tenor-gif-embed" data-postid="11000679121036284802" data-share-method="host"
                    data-aspect-ratio="1" data-width="40%"><a
                        href="https://tenor.com/view/khanov1-gif-11000679121036284802">Khanov1 GIF</a>from <a
                        href="https://tenor.com/search/khanov1-gifs">Khanov1 GIFs</a></div>
                <script type="text/javascript" async src="https://tenor.com/embed.js"></script>
            </div>
            <!-- <div class="heart"></div>
          <div class="smile"></div>
          <div class="eyes"></div> -->
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.3.1/dist/confetti.browser.min.js"></script>

    <script>
        setInterval(() => {
            confetti({
                particleCount: 100,
                spread: 60,
                origin: { x: 0.5, y: 0.5 }
            });
        }, 2000);

        //Musica
        const music = document.getElementById("bgMusic");
        let fadeInterval = null;

        function activarMusica() {
            // Seguridad: evitar doble ejecución
            if (!music.paused) return;

            // Empezar en 1:05
            music.currentTime = 65;

            // Iniciar en silencio
            music.volume = 0;
            music.play();

            // Fade in
            let vol = 0;
            fadeInterval = setInterval(() => {
                vol += 0.03;            // velocidad del fade
                if (vol >= 0.3) {       // volumen final
                    vol = 0.3;
                    clearInterval(fadeInterval);
                }
                music.volume = vol;
            }, 200);

            // Quitar listeners
            document.removeEventListener("touchstart", activarMusica);
            document.removeEventListener("click", activarMusica);
        }

        // Móvil
        document.addEventListener("touchstart", activarMusica);

        // Desktop backup
        document.addEventListener("click", activarMusica);
    </script>
</body>

</html>